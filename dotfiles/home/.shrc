#!/bin/bash

# ===
# Shell Variables
# ===
# History length, see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=65534
HISTFILESIZE=$HISTSIZE

# ===
# Aliases
# ===
# Enable color support of ls
if [ -x /usr/bin/dircolors ]; then
    test -r ~/.dircolors && eval "$(dircolors -b ~/.dircolors)" || eval "$(dircolors -b)"
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# Reload $SHELL rc file
alias reload!='. $HOME/.${SHELL#*/bin/}rc'

# Navigation
alias ..='cd .. ; pwd ; ls'
alias ...='cd ../.. ; pwd ; ls'
alias ~='cd $HOME ; pwd ; ls'
alias -- -='cd -'

# Shortcuts
function ls_l() {
pwd
/bin/ls -ClF --group-directories-first --color $@ | less
}
alias l="ls_l"
alias c="clear; ls_l"

# Networking
alias ip4="ip addr | grep -e 'inet ' -e ':\ '"
alias ip6="ip addr | grep -e 'inet6 ' -e ':\ '"
alias wan="curl -s ipinfo.io/ip"

# Directory stack
alias p='pushd . > /dev/null'
alias P="popd > /dev/null ; pwd"
alias pP="pushd . > /dev/null ; cd ~2 ; popd -n +2 > /dev/null ; pwd"
alias Pp="popd > /dev/null ; pushd . > /dev/null ; pwd"

# Alert for long processes
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'

# Ranger file browser
alias ranger="ranger -d ."

# Stopwatch
alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'

# git
alias gl="git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative --graph --all"
alias grc='gource -i 0'

# w3m
alias w3m='w3m https://google.ca/'

# wget
alias wget='wget --hsts-file=~/.config/cache/.wget-hsts'

# ---
# Exports
# ---
# PATH
export PATH=$PATH:~/.bin # user
export PATH="$(ruby -e 'print Gem.user_dir')/bin:$PATH" # ruby

# Default editor
export EDITOR='vim'

# less - Prevent altscreen (diable termcap) and force quit on small files
export LESS="-XFre"

# Compilation flags
# export ARCHFLAGS="-arch x86_64"

# ssh
# export SSH_KEY_PATH="~/.ssh/dsa_id"

# Path to your oh-my-zsh installation.
export ZSH=$HOME/.oh-my-zsh

# Development
export n0v1c3=$HOME/Documents/development/n0v1c3
export rne=$HOME/Documents/development/rne-travis
export XAUTHORITY=$HOME/.config/xsession/.Xauthority

# History and Logs
export HISTFILE=$HOME/.config/history/.sh_history
export LESSHISTFILE=$HOME/.config/history/.lesshst
export MYSQL_HISTFILE=$HOME/.config/history/.mysql_history
export PYTHONSTARTUP=$HOME/.pythonrc

# Password Store
export PASSWORD_STORE_DIR=$n0v1c3/linux/dotfiles/home/.ps
export GNUPGHOME=$HOME/.config/gnupg

# Networking
export WAN=75.156.147.235

# ===
# Source files
# ===
# TODO [170324] - Should have a common folder for all custom source files
# Git functions
source $n0v1c3/linux/scripts/bash/functions/git.sh

# ===
# Custom functions
# ===
# i3 auto functions
i3-auto > /dev/null
